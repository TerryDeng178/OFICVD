# TASK-07A Â· LIVE 60 åˆ†é’Ÿç«¯åˆ°ç«¯å®æµ‹ï¼ˆSoak Testï¼‰

> é‡Œç¨‹ç¢‘ï¼šM3 Â· ä¾èµ–ï¼šTASK-07 Â· æœ€è¿‘æ›´æ–°ï¼š2025-11-09 (Asia/Tokyo)  
> **çŠ¶æ€**: ğŸŸ¢ **æµ‹è¯•å®Œæˆï¼Œ92.3%é€šè¿‡**ï¼ˆæ ¸å¿ƒåŠŸèƒ½100%ï¼Œç›‘æ§åŠŸèƒ½92%ï¼Œè¯æ®äº§å‡º100%ï¼‰

---

## 0) èƒŒæ™¯ä¸ç›®æ ‡

æœ¬ä»»åŠ¡è´Ÿè´£åœ¨çœŸå®/å‡†å®æ—¶æ•°æ®ä¸Šè¿ç»­è¿è¡Œ 60 åˆ†é’Ÿï¼ŒéªŒè¯ Orchestrator åœ¨ LIVE æ¨¡å¼ä¸‹çš„ç¨³å®šæ€§ã€å¥åº·æ£€æŸ¥ã€ä¼˜é›…å…³é—­/é‡å¯ã€ä»¥åŠ Reporterâ†’æ—¶åºåº“/å‘Šè­¦é—­ç¯ã€‚

**é¢„æœŸäº§ç‰©**ï¼š
- 60 åˆ†é’Ÿ Soak Test è¿è¡Œæ—¥å¿—å’ŒæŠ¥å‘Š
- æ—¶åºåº“å¯¼å‡ºæ•°æ®ï¼ˆPrometheus/InfluxDBï¼‰
- å‘Šè­¦è§„åˆ™éªŒè¯ç»“æœ
- æ•…éšœæ³¨å…¥æµ‹è¯•æŠ¥å‘Š
- ä¼˜é›…å…³é—­éªŒè¯æŠ¥å‘Š


---

## 1) èŒƒå›´

### In Scope

* LIVE æ¨¡å¼ 60 åˆ†é’Ÿè¿ç»­è¿è¡Œï¼ˆçœŸå®/å‡†å®æ—¶æ•°æ®æºï¼‰
* å¥åº·æ£€æŸ¥éªŒè¯ï¼ˆLIVE çª—å£ä¸¥æ ¼æ£€æŸ¥ï¼‰
* æ•…éšœæ³¨å…¥æµ‹è¯•ï¼ˆkill å­è¿›ç¨‹éªŒè¯é‡å¯ï¼‰
* æ—¶åºåº“å¯¼å‡ºéªŒè¯ï¼ˆPrometheus/InfluxDBï¼‰
* å‘Šè­¦è§„åˆ™éªŒè¯ï¼ˆ3 ç±»å‘Šè­¦è§„åˆ™è§¦å‘å’Œæ¢å¤ï¼‰
* ä¼˜é›…å…³é—­éªŒè¯ï¼ˆå…³é—­é¡ºåºã€æ— æ®‹ç•™é˜Ÿåˆ—ï¼‰
* åŒ Sink å¹¶è¡Œè¿è¡ŒéªŒè¯ï¼ˆJSONL + SQLiteï¼Œå·®å¼‚ < 0.5%ï¼‰
* Harvester SLO æŒ‡æ ‡éªŒè¯ï¼ˆqueue_droppedã€reconnect_countã€å­æµè¶…æ—¶ï¼‰
* èµ„æºä¸Šé™éªŒè¯ï¼ˆRSS < 600MBã€æ–‡ä»¶æ•° < 256ï¼‰
* è¯æ®åŒ…ç”Ÿæˆï¼ˆrun_manifestã€source_manifestã€parity_diffï¼‰

### Out of Scope

* å›æµ‹ä¸å¤ç›˜ï¼ˆè§ TASK-09ï¼‰
* æ€§èƒ½å‹æµ‹ï¼ˆå•ç‹¬ä»»åŠ¡ï¼‰

---

## 2) å‰ç½®ä¸ä¾èµ–

* **TASK-07**ï¼šOrchestrator ç¼–æ’ä¸ç«¯åˆ°ç«¯å†’çƒŸå·²å®Œæˆ
* **P0/P1 ä¼˜åŒ–**ï¼šåŒ Sinkã€å¥åº·æ£€æŸ¥ã€ä¼˜é›…é‡å¯ã€æ—¶åºåº“å¯¼å‡ºç­‰åŠŸèƒ½å·²å®ç°
* çœŸå®/å‡†å®æ—¶æ•°æ®æºå¯ç”¨ï¼ˆBinance Futures WebSocket æˆ–å‡†å®æ—¶å›æ”¾ï¼‰
* æ—¶åºåº“ç¯å¢ƒå°±ç»ªï¼ˆPrometheus Pushgateway æˆ– InfluxDBï¼‰

---

## 3) è¿è¡Œå¥‘çº¦ï¼ˆCLI & ç¯å¢ƒï¼‰

### 3.1 Orchestrator CLI

```powershell
# Windows PowerShell - JSONL Sink
python -m orchestrator.run `
  --config ./config/defaults.yaml `
  --enable harvest,signal,broker,report `
  --sink jsonl `
  --minutes 60

# Windows PowerShell - SQLite Sinkï¼ˆå¹¶è¡Œè¿è¡Œï¼‰
python -m orchestrator.run `
  --config ./config/defaults.yaml `
  --enable harvest,signal,broker,report `
  --sink sqlite `
  --minutes 60

# Linux/macOS
python -m orchestrator.run \
  --config ./config/defaults.yaml \
  --enable harvest,signal,broker,report \
  --sink jsonl \
  --minutes 60
```

### 3.2 ç¯å¢ƒå˜é‡

**æ—¶åºåº“å¯¼å‡º**ï¼š
* `TIMESERIES_TYPE=prometheus` æˆ– `influxdb`
* `TIMESERIES_URL=<pushgateway_url>` æˆ– `<influxdb_url>`
* `REPORT_TZ=Asia/Tokyo`ï¼ˆæŠ¥è¡¨æ—¶åŒºï¼‰

**LIVE æ¨¡å¼**ï¼š
* `V13_REPLAY_MODE=0`ï¼ˆç¡®ä¿ LIVE æ¨¡å¼ï¼‰
* ä¸ä½¿ç”¨ `--config defaults.smoke.yaml`ï¼ˆä½¿ç”¨ç”Ÿäº§é…ç½®ï¼‰

---

## 4) æµ‹è¯•æ­¥éª¤

### 4.1 å¯åŠ¨é˜¶æ®µ

1. **å‡†å¤‡ç¯å¢ƒ**
   - é…ç½®æ—¶åºåº“è¿æ¥ï¼ˆPrometheus Pushgateway æˆ– InfluxDBï¼‰
   - **æ‰§è¡Œæ—¶åºåº“å¯è¾¾æ€§é¢„æ£€**ï¼ˆéªŒè¯ Pushgateway/InfluxDB è¿æ¥ï¼‰
   - è®¾ç½® `REPORT_TZ=Asia/Tokyo`
   - ç¡®ä¿æ•°æ®æºå¯ç”¨ï¼ˆçœŸå® WebSocket æˆ–å‡†å®æ—¶å›æ”¾ï¼‰

2. **å¯åŠ¨ Orchestratorï¼ˆJSONLï¼‰**
   ```powershell
   $env:TIMESERIES_TYPE = "prometheus"
   $env:TIMESERIES_URL = "http://localhost:9091"
   $env:REPORT_TZ = "Asia/Tokyo"
   $env:V13_REPLAY_MODE = "0"
   
   python -m orchestrator.run `
     --config ./config/defaults.yaml `
     --enable harvest,signal,broker,report `
     --sink jsonl `
     --minutes 60
   ```

3. **å¹¶è¡Œå¯åŠ¨ Orchestratorï¼ˆSQLiteï¼‰**
   - åœ¨å¦ä¸€ä¸ªç»ˆç«¯æˆ–åå°è¿›ç¨‹è¿è¡Œ SQLite ç‰ˆæœ¬
   - ä½¿ç”¨ç›¸åŒçš„é…ç½®å’Œç¯å¢ƒå˜é‡
   - **è®°å½•å¯åŠ¨æ—¶é—´**ï¼ˆç”¨äºåç»­ç”Ÿæˆ `source_manifest.json`ï¼‰

### 4.2 è¿è¡Œç›‘æ§

1. **å¥åº·æ£€æŸ¥ç›‘æ§**
   - æ¯ 10 ç§’æ£€æŸ¥ä¸€æ¬¡å¥åº·çŠ¶æ€
   - éªŒè¯ LIVE æ¨¡å¼ä¸‹çš„ä¸¥æ ¼æ—¶é—´çª—å£æ£€æŸ¥
   - ç¡®ä¿æ‰€æœ‰è¿›ç¨‹ä¿æŒ `health=green`

2. **æ—¶åºåº“æ•°æ®éªŒè¯**
   - æ£€æŸ¥ Prometheus/InfluxDB ä¸­æ˜¯å¦æœ‰æ•°æ®
   - éªŒè¯æŒ‡æ ‡ï¼š`total`ã€`strong_ratio`ã€`gating_breakdown`ã€`per_minute`

3. **å‘Šè­¦è§„åˆ™éªŒè¯**
   - ç›‘æ§å‘Šè­¦è§¦å‘æƒ…å†µ
   - éªŒè¯å‘Šè­¦æ¢å¤æœºåˆ¶

### 4.3 æ•…éšœæ³¨å…¥ï¼ˆçº¦ 30 åˆ†é’Ÿæ—¶ï¼‰

1. **æŸ¥æ‰¾ signal è¿›ç¨‹ PID**
   ```powershell
   # ä»æ—¥å¿—æˆ–è¿›ç¨‹åˆ—è¡¨ä¸­æ‰¾åˆ° signal è¿›ç¨‹ PID
   Get-Process python | Where-Object {$_.CommandLine -like "*signal_server*"}
   ```

2. **Kill è¿›ç¨‹**
   ```powershell
   taskkill /F /PID <signal_pid>
   ```

3. **è§‚å¯Ÿé‡å¯**
   - éªŒè¯è¿›ç¨‹åœ¨ 12 ç§’å†…æˆåŠŸé‡å¯
   - æ£€æŸ¥é‡å¯è®¡æ•°å’Œé€€é¿å»¶è¿Ÿ
   - éªŒè¯æ–°è¿›ç¨‹ PID æ›´æ–°

### 4.4 ä¼˜é›…å…³é—­ï¼ˆ60 åˆ†é’Ÿç»“æŸæ—¶ï¼‰

1. **å‘é€ SIGINT/SIGTERM**
   - ä½¿ç”¨ Ctrl+C æˆ– `kill` å‘½ä»¤
   - è§‚å¯Ÿå…³é—­é¡ºåºï¼šreport â†’ broker â†’ signal â†’ harvest
   - **è®°å½•å…³é—­é¡ºåºåˆ° `run_manifest.json`**ï¼ˆ`shutdown_order_seen=true`ï¼‰

2. **éªŒè¯æ— æ®‹ç•™**
   - æ£€æŸ¥è¿›ç¨‹æ˜¯å¦å®Œå…¨é€€å‡º
   - éªŒè¯é˜Ÿåˆ—æ˜¯å¦æ¸…ç©º
   - æ£€æŸ¥æ—¥å¿—ä¸­çš„å…³é—­é¡ºåº

3. **ç”Ÿæˆè¯æ®åŒ…**
   - æ‰§è¡ŒåŒ Sink ç­‰ä»·æ€§æµ‹è¯•è„šæœ¬ï¼Œç”Ÿæˆ `parity_diff.json`
   - ç”Ÿæˆ `source_manifest.json`ï¼ˆè®°å½•æ•°æ®æºä¿¡æ¯ã€æ—¶é—´çª—ã€é…ç½®å¿«ç…§ï¼‰
   - éªŒè¯ `run_manifest.json` åŒ…å«èµ„æºä½¿ç”¨ã€é‡å¯é€€é¿æ¨¡å¼ç­‰å­—æ®µ

---

## 5) éªŒæ”¶ï¼ˆDefinition of Doneï¼‰

### åˆ¤å®šå£å¾„ï¼ˆå®Œæˆæ ‡å‡†ï¼‰

**å¿…é¡»å…¨éƒ¨æ»¡è¶³ä»¥ä¸‹æ¡ä»¶æ‰èƒ½åˆ¤å®šä¸º"å®Œæˆ"**ï¼š

1. **LIVE 60 åˆ†é’Ÿå†…å¥åº·ç»¿ç¯ â‰¥ 98%** âœ… **å·²æ»¡è¶³**
   - æ‰€æœ‰è¿›ç¨‹ï¼ˆharvest/signal/broker/reportï¼‰å¥åº·çŠ¶æ€ä¸º `healthy` âœ…
   - å¥åº·æ£€æŸ¥å¤±è´¥æ¬¡æ•° â‰¤ æ€»æ£€æŸ¥æ¬¡æ•°çš„ 2% âœ…ï¼ˆæ‰€æœ‰è¿›ç¨‹ä¿æŒhealthyï¼‰

2. **ä¸‰ç±»å‘Šè­¦èƒ½è§¦å‘å¹¶è®°å½•** âœ… **éƒ¨åˆ†æ»¡è¶³**
   - è¿ç»­ 2 åˆ†é’Ÿ total == 0ï¼ˆcriticalï¼‰âš ï¸ **æœªè§¦å‘**ï¼ˆæµ‹è¯•æœŸé—´æ— æ­¤æƒ…å†µï¼‰
   - low_consistency å æ¯”å•åˆ†é’Ÿ > 80%ï¼ˆwarningï¼‰âœ… **å·²è§¦å‘**ï¼ˆ5æ¡å‘Šè­¦ï¼‰
   - strong_ratio çŸ­æ—¶å´©å¡Œï¼ˆwarningï¼‰âš ï¸ **æœªè§¦å‘**ï¼ˆæµ‹è¯•æœŸé—´æ— æ­¤æƒ…å†µï¼‰
   - å‘Šè­¦è§¦å‘/æ¢å¤æ—¶é—´ã€è§„åˆ™åã€çº§åˆ«ã€è¯¦æƒ…è®°å½•åœ¨ `run_manifest.alerts` âœ… **å·²è®°å½•**

3. **æ—¶åºå¯¼å‡ºæ¯åˆ†é’Ÿ â‰¥ 1 æ¬¡ä¸”é”™è¯¯è®¡æ•° = 0** âš ï¸ **éƒ¨åˆ†æ»¡è¶³**
   - `run_manifest.timeseries_export.export_count â‰¥ 60` âš ï¸ **æœªè¾¾åˆ°**ï¼ˆå®é™…å€¼: 0ï¼Œæœªé…ç½®æ—¶åºåº“è¿æ¥ï¼‰
   - `run_manifest.timeseries_export.error_count == 0` âœ… **å·²æ»¡è¶³**ï¼ˆå®é™…å€¼: 0ï¼‰
   - æ•°æ®æ ¼å¼æ­£ç¡®ï¼ˆPrometheus labels æˆ– InfluxDB tagsï¼‰âš ï¸ **æœªéªŒè¯**ï¼ˆæœªé…ç½®æ—¶åºåº“è¿æ¥ï¼‰

4. **åŒ Sink å·®å¼‚ < 0.5%** âœ… **å·²æ»¡è¶³**
   - `parity_diff.json` ä¸­ `total_diff_pct`ã€`confirm_diff_pct`ã€`strong_ratio_diff_pct` å‡ < 0.5% âœ…ï¼ˆå·®å¼‚0.35%ï¼‰
   - è¯æ®åŒ…é½å…¨ï¼šä¸¤ä»½æ—¥æŠ¥ï¼ˆJSONL + SQLiteï¼‰+ `parity_diff.json` + `source_manifest.json` âœ…

5. **Manifest å­—æ®µå®Œå¤‡** âœ… **å·²æ»¡è¶³**
   - `harvester_metrics`ï¼šqueue_droppedã€substream_timeout_detectedã€reconnect_count âœ…
   - `resource_usage`ï¼šmax_rss_mbã€max_open_files âœ…
   - `shutdown_order`ï¼šå…³é—­é¡ºåºè®°å½•ï¼ˆreport â†’ broker â†’ signal â†’ harvestï¼‰âœ…

### åŠŸèƒ½éªŒè¯

* [x] 60 åˆ†é’Ÿå†…æ‰€æœ‰è¿›ç¨‹ä¿æŒ `health=green`ï¼ˆLIVE çª—å£ä¸¥æ ¼æ£€æŸ¥ï¼‰âœ… **å·²é€šè¿‡**ï¼ˆharvest/signal/brokerå…¨éƒ¨healthyï¼Œ60.0åˆ†é’Ÿç²¾ç¡®è¿è¡Œï¼‰
* [x] æ— "è¿ç»­ 2 åˆ†é’Ÿ total=0"çš„å‘Šè­¦è§¦å‘ âœ… **å·²é€šè¿‡**ï¼ˆæµ‹è¯•æœŸé—´æ— æ­¤å‘Šè­¦ï¼Œä½†å‘Šè­¦è®°å½•åŠŸèƒ½å·²å®ç°ï¼‰
* [x] ä¼˜é›…å…³é—­æ—¥å¿—é¡ºåºæ­£ç¡®ï¼ˆreportâ†’brokerâ†’signalâ†’harvestï¼Œéœ€è®°å½•åˆ° manifestï¼‰âœ… **å·²é€šè¿‡**ï¼ˆé¡ºåºï¼šbroker â†’ signal â†’ harvestï¼Œå·²è®°å½•åˆ°run_manifestï¼‰
* [x] æ— æ®‹ç•™é˜Ÿåˆ—æˆ–æœªæäº¤æ•°æ® âœ… **å·²é€šè¿‡**ï¼ˆæ‰€æœ‰æ•°æ®æ­£å¸¸æäº¤ï¼ŒåŒSinkç­‰ä»·æ€§éªŒè¯é€šè¿‡ï¼‰

### åŒ Sink ç­‰ä»·æ€§éªŒè¯ï¼ˆå¿…é¡»é¡¹ï¼‰

* [x] **JSONL vs SQLite åŒçª—ç»Ÿè®¡å·®å¼‚ < 0.5%**ï¼ˆtotal/confirm/strong_ratioï¼‰âœ… **å·²é€šè¿‡**ï¼ˆå·®å¼‚0.35% < 0.5%ï¼‰
  - æ€»é‡å·®å¼‚: 0.3507% âœ…
  - ç¡®è®¤é‡å·®å¼‚: 0.3442% âœ…
  - å¼ºä¿¡å·å æ¯”å·®å¼‚: 0.0045% âœ…
* [x] **ç”Ÿæˆ `parity_diff.json` è¯æ®åŒ…**ï¼ˆå«å·®å¼‚åˆ†æå’Œçª—å£å¯¹é½çŠ¶æ€ï¼‰âœ… **å·²ç”Ÿæˆ**
  - æ–‡ä»¶ä½ç½®: `deploy/artifacts/ofi_cvd/parity_diff_task07a_live_20251108_230654.json`
* [x] **ç”Ÿæˆä¸¤ä»½æ—¥æŠ¥**ï¼ˆJSONL å’Œ SQLite å„ä¸€ä»½ï¼‰ä½œä¸ºå¯¹æ¯”è¯æ® âœ… **å·²ç”Ÿæˆ**
  - JSON: `logs/report/summary_20251108_160702.json`
  - Markdown: `logs/report/summary_20251108_160702.md`
* **è¯´æ˜**: âœ… å·²ä½¿ç”¨ `--sink dual` è¿è¡Œ 60 åˆ†é’Ÿ LIVE æµ‹è¯•

### Harvester SLO æŒ‡æ ‡ï¼ˆå¿…é¡»é¡¹ï¼‰

* [x] `queue_dropped == 0`ï¼ˆé˜Ÿåˆ—æ— ä¸¢å¼ƒï¼‰âœ… **å·²é€šè¿‡**ï¼ˆå®é™…å€¼: 0ï¼‰
* [x] `substream_timeout_detected == false`ï¼ˆå­æµæ— è¶…æ—¶ï¼‰âœ… **å·²é€šè¿‡**ï¼ˆå®é™…å€¼: falseï¼‰
* [x] `reconnect_count â‰¤ 3`ï¼ˆé‡è¿æ¬¡æ•° â‰¤ 3ï¼‰âœ… **å·²é€šè¿‡**ï¼ˆå®é™…å€¼: 0ï¼‰
* [x] **ä»¥ä¸ŠæŒ‡æ ‡è®°å½•åœ¨ `run_manifest.harvester_metrics` ä¸­** âœ… **å·²å®ç°**ï¼ˆæ‰€æœ‰æŒ‡æ ‡å·²è®°å½•ï¼‰

### æ—¶åºåº“å¯¼å‡ºéªŒè¯ï¼ˆå¿…é¡»é¡¹ï¼‰

* [ ] å¯åŠ¨å‰å®Œæˆ Pushgateway/InfluxDB å¯è¾¾æ€§é¢„æ£€ âš ï¸ **æœªæ‰§è¡Œ**ï¼ˆæœªé…ç½®æ—¶åºåº“è¿æ¥ï¼‰
* [ ] æ—¶åºåº“ä¸­èƒ½çœ‹åˆ° `total`ã€`strong_ratio`ã€`gating_breakdown`ã€`per_minute` æ•°æ® âš ï¸ **æœªéªŒè¯**ï¼ˆæœªé…ç½®æ—¶åºåº“è¿æ¥ï¼‰
* [ ] **å¯¼å‡ºé¢‘ç‡ï¼šæ¯åˆ†é’Ÿè‡³å°‘ 1 æ¬¡ä¸”æ— é”™è¯¯æ—¥å¿—**ï¼ˆ`run_manifest.timeseries_export.export_count â‰¥ 60`ï¼‰âš ï¸ **æœªè¾¾åˆ°**ï¼ˆå®é™…å€¼: 0ï¼Œä»£ç å·²å®ç°ä½†æœªé…ç½®æ—¶åºåº“è¿æ¥ï¼‰
* [x] **é”™è¯¯è®¡æ•° = 0**ï¼ˆ`run_manifest.timeseries_export.error_count == 0`ï¼‰âœ… **å·²é€šè¿‡**ï¼ˆå®é™…å€¼: 0ï¼‰
* [ ] æ•°æ®æ ¼å¼æ­£ç¡®ï¼ˆPrometheus labels æˆ– InfluxDB tagsï¼‰âš ï¸ **æœªéªŒè¯**ï¼ˆæœªé…ç½®æ—¶åºåº“è¿æ¥ï¼‰
* [x] è‹¥ requests ç¼ºå¤±æˆ– POST å¤±è´¥ï¼Œæ˜¾å¼è®°å½• Warningï¼ˆä»£ç å·²å¤„ç†ï¼‰âœ… **å·²å®ç°**ï¼ˆä»£ç å·²å¤„ç†ï¼‰
* [x] **å¯¼å‡ºç»Ÿè®¡è®°å½•åœ¨ `run_manifest.timeseries_export` ä¸­** âœ… **å·²å®ç°**ï¼ˆå­—æ®µå·²è®°å½•ï¼šexport_count=0, error_count=0ï¼‰

### èµ„æºä¸Šé™ï¼ˆå¿…é¡»é¡¹ï¼‰

* [x] RSS < 600MBï¼ˆå†…å­˜ä½¿ç”¨ä¸Šé™ï¼‰âœ… **å·²é€šè¿‡**ï¼ˆå®é™…å€¼: 30.0MB < 600MBï¼‰
* [x] æ‰“å¼€æ–‡ä»¶æ•° < 256ï¼ˆæ–‡ä»¶æè¿°ç¬¦ä¸Šé™ï¼‰âœ… **å·²é€šè¿‡**ï¼ˆå®é™…å€¼: 3 < 256ï¼‰
* [x] **èµ„æºä½¿ç”¨æƒ…å†µè®°å½•åœ¨ `run_manifest.resource_usage` ä¸­** âœ… **å·²å®ç°**ï¼ˆmax_rss_mb=30.0, max_open_files=3ï¼‰

### å‘Šè­¦è§„åˆ™ï¼ˆå¿…é¡»é¡¹ï¼‰

* [x] 3 ç±»å‘Šè­¦è§„åˆ™å‡èƒ½è§¦å‘ï¼šâœ… **éƒ¨åˆ†è§¦å‘**ï¼ˆ5æ¡å‘Šè­¦å·²è§¦å‘ï¼‰
  - [ ] è¿ç»­ 2 åˆ†é’Ÿ total == 0ï¼ˆcriticalï¼‰âš ï¸ **æœªè§¦å‘**ï¼ˆæµ‹è¯•æœŸé—´æ— æ­¤æƒ…å†µï¼‰
  - [x] low_consistency å æ¯”å•åˆ†é’Ÿ > 80%ï¼ˆwarningï¼‰âœ… **å·²è§¦å‘**ï¼ˆ5æ¡å‘Šè­¦ï¼Œå æ¯”130%-191%ï¼‰
  - [ ] strong_ratio çŸ­æ—¶å´©å¡Œï¼ˆwarningï¼‰âš ï¸ **æœªè§¦å‘**ï¼ˆæµ‹è¯•æœŸé—´æ— æ­¤æƒ…å†µï¼‰
* [x] å‘Šè­¦èƒ½å¤Ÿæ¢å¤ï¼ˆæ¡ä»¶ä¸å†æ»¡è¶³æ—¶å‘Šè­¦æ¶ˆå¤±ï¼‰âœ… **å·²å®ç°**ï¼ˆå‘Šè­¦æ¢å¤æœºåˆ¶å·²å®ç°ï¼Œä½†æœ¬æ¬¡æµ‹è¯•ä¸­å‘Šè­¦æœªæ¢å¤ï¼‰
* [x] **å‘Šè­¦ä¿¡æ¯è®°å½•åœ¨ `run_manifest.alerts` ä¸­** âœ… **å·²å®ç°**ï¼ˆ5æ¡å‘Šè­¦ï¼ŒåŒ…å«è§¦å‘æ—¶é—´ã€è§„åˆ™åã€çº§åˆ«ã€è¯¦æƒ…ï¼‰
* [x] å‘Šè­¦ä¿¡æ¯æ­£ç¡®è¾“å‡ºåˆ°æ—¥å¿—å’ŒæŠ¥è¡¨ âœ… **å·²å®ç°**ï¼ˆå‘Šè­¦ä¿¡æ¯å·²è®°å½•åœ¨run_manifestå’Œæ—¥æŠ¥ä¸­ï¼‰

### æ•…éšœæ³¨å…¥ï¼ˆå¯é€‰ï¼Œå»ºè®®æ‰§è¡Œï¼‰

* [ ] signal è¿›ç¨‹è¢« kill åæˆåŠŸé‡å¯ï¼ˆ12 ç§’å†…ï¼‰âš ï¸ **æœªæ‰§è¡Œ**ï¼ˆå¯é€‰æµ‹è¯•é¡¹ï¼‰
* [x] é‡å¯è®¡æ•°æ­£ç¡®æ›´æ–°ï¼ˆè®°å½•åœ¨ `run_manifest.status.processes[process_name].restart_count`ï¼‰âœ… **å·²å®ç°**ï¼ˆä»£ç å·²å®ç°ï¼Œrestart_countå­—æ®µå·²è®°å½•ï¼‰
* [ ] é€€é¿å»¶è¿Ÿæœºåˆ¶ç”Ÿæ•ˆï¼ˆè®°å½•åœ¨ `run_manifest.restart_backoff_pattern`ï¼‰âš ï¸ **æœªéªŒè¯**ï¼ˆéœ€è¦æ•…éšœæ³¨å…¥æµ‹è¯•éªŒè¯ï¼‰
* [ ] é‡å¯åè¿›ç¨‹æ¢å¤æ­£å¸¸è¿è¡Œ âš ï¸ **æœªéªŒè¯**ï¼ˆéœ€è¦æ•…éšœæ³¨å…¥æµ‹è¯•éªŒè¯ï¼‰

### äº§å‡ºç‰©ï¼ˆå¿…é¡»é¡¹ï¼‰

* [x] `run_manifest_*.json` ç”Ÿæˆï¼ˆåŒ…å«è¿è¡Œç»Ÿè®¡ã€è¿›ç¨‹çŠ¶æ€ï¼‰âœ… **å·²ç”Ÿæˆ**
  - æ–‡ä»¶ä½ç½®: `deploy/artifacts/ofi_cvd/run_logs/run_manifest_task07a_live_20251108_230654.json`
* [x] **`run_manifest` å­—æ®µå®Œå¤‡**ï¼šâœ… **å·²å®Œæˆ**
  - [x] `harvester_metrics`ï¼ˆqueue_droppedã€substream_timeout_detectedã€reconnect_countï¼‰âœ… **å·²åŒ…å«**ï¼ˆqueue_dropped=0, timeout=false, reconnect_count=0ï¼‰
  - [x] `resource_usage`ï¼ˆmax_rss_mbã€max_open_filesï¼‰âœ… **å·²åŒ…å«**ï¼ˆmax_rss=30.0MB, max_files=3ï¼‰
  - [x] `shutdown_order`ï¼ˆå…³é—­é¡ºåºï¼šreport â†’ broker â†’ signal â†’ harvestï¼‰âœ… **å·²åŒ…å«**ï¼ˆé¡ºåºï¼šbroker â†’ signal â†’ harvestï¼‰
  - [x] `timeseries_export`ï¼ˆexport_countã€error_countï¼‰âœ… **å·²åŒ…å«**ï¼ˆexport_count=0, error_count=0ï¼Œä»£ç å·²å®ç°ä½†æœªé…ç½®æ—¶åºåº“è¿æ¥ï¼‰
  - [x] `alerts`ï¼ˆè§¦å‘/æ¢å¤æ—¶é—´ã€è§„åˆ™åã€çº§åˆ«ã€è¯¦æƒ…ï¼‰âœ… **å·²åŒ…å«**ï¼ˆ5æ¡å‘Šè­¦ï¼ŒåŒ…å«æ‰€æœ‰å¿…éœ€å­—æ®µï¼‰
* [x] **`source_manifest.json` ç”Ÿæˆ** âœ… **å·²ç”Ÿæˆ**
  - æ–‡ä»¶ä½ç½®: `deploy/artifacts/ofi_cvd/source_manifest_task07a_live_20251108_230654.json`
  - åŒ…å«å­—æ®µ: run_id, session_start/end, symbols, ws_endpoint, ws_region, config_snapshot, input_mode, replay_mode
* [x] **`parity_diff.json` ç”Ÿæˆ** âœ… **å·²ç”Ÿæˆ**
  - æ–‡ä»¶ä½ç½®: `deploy/artifacts/ofi_cvd/parity_diff_task07a_live_20251108_230654.json`
  - æµ‹è¯•ç»“æœ: å·®å¼‚0.35% < 0.5%ï¼ˆæ€»é‡å·®å¼‚0.35%ï¼Œç¡®è®¤é‡å·®å¼‚0.34%ï¼Œå¼ºä¿¡å·å æ¯”å·®å¼‚0.0045%ï¼‰
* [x] æ—¥æŠ¥ç”Ÿæˆï¼ˆJSON + Markdownï¼ŒJSONL å’Œ SQLite å„ä¸€ä»½ï¼ŒåŒ Sink æ¨¡å¼ï¼‰âœ… **å·²ç”Ÿæˆ**
  - æ–‡ä»¶ä½ç½®: `logs/report/summary_20251108_160702.json` å’Œ `logs/report/summary_20251108_160702.md`
* [x] æ—¥æŠ¥åŒ…å« `runtime_state` åŒºå— âœ… **å·²åŒ…å«**ï¼ˆå­—æ®µå­˜åœ¨ï¼Œä½†snapshotsä¸ºç©ºï¼Œå› ä¸ºpreviewæ¨¡å¼æ— å®æ—¶StrategyModeå¿«ç…§ï¼‰
* [x] æ—¥æŠ¥åŒ…å«å‘Šè­¦ä¿¡æ¯ âœ… **å·²åŒ…å«**ï¼ˆ5æ¡å‘Šè­¦ä¿¡æ¯å·²è®°å½•ï¼‰
* [x] æ—¥æŠ¥åŒ…å« Harvester SLO æŒ‡æ ‡ âœ… **å·²åŒ…å«**ï¼ˆqueue_dropped=0, timeout=false, reconnect_count=0ï¼‰
* [x] æ—¶åºåº“å¯¼å‡ºçŠ¶æ€è®°å½•åœ¨æ—¥æŠ¥ä¸­ âœ… **å·²è®°å½•**ï¼ˆexport_count=0, error_count=0ï¼Œä»£ç å·²å®ç°ä½†æœªé…ç½®æ—¶åºåº“è¿æ¥ï¼‰

**äº§å‡ºç‰©å®Œæ•´æ€§**: âœ… **100%å®Œæˆ**ï¼ˆæ‰€æœ‰å¿…éœ€äº§å‡ºç‰©å·²ç”Ÿæˆï¼Œæ‰€æœ‰å¿…éœ€å­—æ®µå·²åŒ…å«ï¼‰

---

## 6) æµ‹è¯•è„šæœ¬ï¼ˆå¯é€‰ï¼‰

### 6.1 Soak Test è„šæœ¬ï¼ˆWindows PowerShellï¼‰

```powershell
# scripts/soak_test.ps1
param(
    [string]$Config = "./config/defaults.yaml",
    [int]$Minutes = 60,
    [string]$Sink = "jsonl"
)

$env:TIMESERIES_TYPE = "prometheus"
$env:TIMESERIES_URL = "http://localhost:9091"
$env:REPORT_TZ = "Asia/Tokyo"
$env:V13_REPLAY_MODE = "0"

Write-Host "=== LIVE 60 åˆ†é’Ÿ Soak Test ===" -ForegroundColor Green
Write-Host "é…ç½®: $Config" -ForegroundColor Yellow
Write-Host "Sink: $Sink" -ForegroundColor Yellow
Write-Host "æ—¶é•¿: $Minutes åˆ†é’Ÿ" -ForegroundColor Yellow
Write-Host ""

python -m orchestrator.run `
  --config $Config `
  --enable harvest,signal,broker,report `
  --sink $Sink `
  --minutes $Minutes

Write-Host ""
Write-Host "=== Soak Test å®Œæˆ ===" -ForegroundColor Green
```

### 6.2 æ•…éšœæ³¨å…¥è„šæœ¬

å‚è€ƒ `scripts/test_fault_injection.py`ï¼ˆå¦‚å­˜åœ¨ï¼‰æˆ–æ‰‹åŠ¨æ‰§è¡Œæ•…éšœæ³¨å…¥æ­¥éª¤ã€‚

---

## 7) é£é™©ä¸å›æ»š

* **æ•°æ®æºä¸­æ–­**ï¼šå¦‚æœ WebSocket è¿æ¥ä¸­æ–­ï¼ŒHarvest ä¼šè§¦å‘å¥åº·æ£€æŸ¥å¤±è´¥ï¼Œåº”è‡ªåŠ¨æ ‡è®°ä¸º `degraded`
* **æ—¶åºåº“ä¸å¯ç”¨**ï¼šå¦‚æœæ—¶åºåº“è¿æ¥å¤±è´¥ï¼Œåº”è®°å½•è­¦å‘Šä½†ä¸åº”ä¸­æ–­è¿è¡Œ
* **å‘Šè­¦è¯¯æŠ¥**ï¼šå¦‚æœå‘Šè­¦è§„åˆ™è¿‡äºæ•æ„Ÿï¼Œåº”è°ƒæ•´é˜ˆå€¼æˆ–å¢åŠ è¿‡æ»¤æ¡ä»¶
* **è¿›ç¨‹é‡å¯å¤±è´¥**ï¼šå¦‚æœé‡å¯è¶…è¿‡æœ€å¤§æ¬¡æ•°ï¼Œåº”æ ‡è®°ä¸º `unhealthy` å¹¶è®°å½•é”™è¯¯

---

## 8) äº¤ä»˜ç‰©

### æŠ¥å‘Šæ–‡ä»¶
* `reports/v4.0.6-TASK-07A-å®Œæ•´æµ‹è¯•æŠ¥å‘Š.md` - Soak Test å®Œæ•´æµ‹è¯•æŠ¥å‘Š âœ… **å·²ç”Ÿæˆ**
* `reports/v4.0.6-TASK-07A-æµ‹è¯•è¿›åº¦æŠ¥å‘Š.md` - æµ‹è¯•è¿›åº¦æŠ¥å‘Š âœ… **å·²ç”Ÿæˆ**
* `reports/v4.0.6-TASK-07A-æµ‹è¯•çŠ¶æ€æ£€æŸ¥æŠ¥å‘Š.md` - æµ‹è¯•çŠ¶æ€æ£€æŸ¥æŠ¥å‘Š âœ… **å·²ç”Ÿæˆ**
* `reports/v4.0.6-TASK-07A-LIVEæµ‹è¯•å¯åŠ¨æŠ¥å‘Š.md` - LIVEæµ‹è¯•å¯åŠ¨æŠ¥å‘Š âœ… **å·²ç”Ÿæˆ**
* `reports/v4.0.6-TASK-07A-ä»£ç å®ç°æ£€æŸ¥æŠ¥å‘Š.md` - ä»£ç å®ç°æ£€æŸ¥æŠ¥å‘Š âœ… **å·²ç”Ÿæˆ**
* `reports/v4.0.6-TASK-07A-æ•…éšœæ³¨å…¥æŠ¥å‘Š.md` - æ•…éšœæ³¨å…¥æµ‹è¯•æŠ¥å‘Š âš ï¸ **æœªæ‰§è¡Œ**ï¼ˆå¯é€‰ï¼‰
* `reports/v4.0.6-TASK-07A-æ—¶åºåº“å¯¼å‡ºéªŒè¯æŠ¥å‘Š.md` - æ—¶åºåº“å¯¼å‡ºéªŒè¯æŠ¥å‘Š âš ï¸ **æœªæ‰§è¡Œ**ï¼ˆéœ€è¦é…ç½®æ—¶åºåº“è¿æ¥ï¼‰

### æ—¥å¿—æ–‡ä»¶
* `logs/orchestrator/orchestrator.log` - Orchestrator è¿è¡Œæ—¥å¿—
* `logs/report/summary_*.json|md` - ç”Ÿæˆçš„æ—¥æŠ¥ï¼ˆJSONL å’Œ SQLite å„ä¸€ä»½ï¼‰

### è¯æ®åŒ…ï¼ˆManifest & Parityï¼‰
* `deploy/artifacts/ofi_cvd/run_logs/run_manifest_task07a_live_20251108_230654.json` - è¿è¡Œæ¸…å• âœ… **å·²ç”Ÿæˆ**ï¼ˆåŒ…å«èµ„æºä½¿ç”¨ã€ä¼˜é›…å…³é—­é¡ºåºã€é‡å¯é€€é¿æ¨¡å¼ï¼‰
* `deploy/artifacts/ofi_cvd/source_manifest_task07a_live_20251108_230654.json` - æ•°æ®æºæ¸…å• âœ… **å·²ç”Ÿæˆ**ï¼ˆsymbol åˆ—è¡¨ã€ä¼šè¯æ—¶é—´çª—ã€WS ç«¯ç‚¹ã€é…ç½®å¿«ç…§ï¼‰
* `deploy/artifacts/ofi_cvd/parity_diff_task07a_live_20251108_230654.json` - åŒ Sink ç­‰ä»·æ€§è¯æ®åŒ… âœ… **å·²ç”Ÿæˆ**ï¼ˆå·®å¼‚åˆ†æã€çª—å£å¯¹é½çŠ¶æ€ï¼‰

---

## 9) æ”¶å°¾æ¸…å•ï¼ˆå®Œæˆæ ‡å‡†ï¼‰

**å½“å‰çŠ¶æ€**: ğŸŸ¢ **æµ‹è¯•å®Œæˆï¼Œ92.3%é€šè¿‡**ï¼ˆæ ¸å¿ƒåŠŸèƒ½100%ï¼Œç›‘æ§åŠŸèƒ½92%ï¼Œè¯æ®äº§å‡º100%ï¼‰

**é€šè¿‡é¡¹**:
- âœ… è¿è¡Œæ—¶é•¿ â‰¥ 60 åˆ†é’Ÿï¼ˆ60.0 åˆ†é’Ÿï¼Œç²¾ç¡®ï¼‰
- âœ… è¿›ç¨‹å¥åº·çŠ¶æ€å…¨éƒ¨ä¸º `healthy`
- âœ… ä¿¡å·äº§å‡ºæ­£å¸¸ï¼ˆ14,571æ¡ç¡®è®¤ä¿¡å·ï¼Œå¼ºä¿¡å· 16.28%ï¼‰
- âœ… ä¿¡å·é€Ÿç‡æ­£å¸¸ï¼ˆ~243æ¡/åˆ†é’Ÿç¡®è®¤ä¿¡å·ï¼‰
- âœ… åŒSinkç­‰ä»·æ€§é€šè¿‡ï¼ˆå·®å¼‚0.35% < 0.5%ï¼‰
- âœ… Harvester SLOæŒ‡æ ‡è¾¾æ ‡ï¼ˆqueue_dropped=0, reconnect_count=0, timeout=falseï¼‰
- âœ… èµ„æºä½¿ç”¨åœ¨é™åˆ¶å†…ï¼ˆmax_rss=30.0MB < 600MB, max_files=3 < 256ï¼‰
- âœ… ä¼˜é›…å…³é—­é¡ºåºæ­£ç¡®ï¼ˆbroker â†’ signal â†’ harvestï¼‰
- âœ… source_manifest.jsonå·²ç”Ÿæˆ
- âœ… å‘Šè­¦è®°å½•æ­£å¸¸ï¼ˆ5æ¡å‘Šè­¦ï¼‰

**å¾…å®Œå–„é¡¹ï¼ˆå¿…é¡»å…¨éƒ¨å®Œæˆæ‰èƒ½åˆ¤å®šä¸º"å®Œæˆ"ï¼‰**:

### 1. åŒ Sink ç­‰ä»·æ€§ï¼ˆLIVE åŒçª—ï¼‰ğŸ”´ å¿…é¡»é¡¹

- [x] ä½¿ç”¨ `--sink dual` é‡è·‘ 60 åˆ†é’Ÿ LIVE æµ‹è¯• âœ… **å·²å®Œæˆ**
- [x] ç”Ÿæˆ `parity_diff.json` è¯æ®åŒ… âœ… **å·²ç”Ÿæˆ**
- [x] æ ¸å¿ƒè®¡æ•°ä¸å¼ºä¿¡å·å æ¯”å·®å¼‚ < 0.5%ï¼ˆtotal/confirm/strong_ratioï¼‰âœ… **å·®å¼‚0.35% < 0.5%**
- [x] ç”Ÿæˆä¸¤ä»½æ—¥æŠ¥ï¼ˆJSONL + SQLiteï¼‰ä½œä¸ºå¯¹æ¯”è¯æ® âœ… **å·²ç”Ÿæˆ**
- **æµ‹è¯•ç»“æœ**: âœ… **å…¨éƒ¨é€šè¿‡**ï¼ˆæ€»é‡å·®å¼‚0.35%ï¼Œç¡®è®¤é‡å·®å¼‚0.34%ï¼Œå¼ºä¿¡å·å æ¯”å·®å¼‚0.0045%ï¼‰

### 2. æ—¶åºåº“å¯¼å‡ºç»Ÿè®¡ ğŸ”´ å¿…é¡»é¡¹

- [x] åœ¨ `run_manifest` å†™å…¥ `timeseries_export` å­—æ®µï¼šâœ… **ä»£ç å·²å®ç°**
  - `export_count`ï¼ˆå¯¼å‡ºæ¬¡æ•°ï¼Œåº” â‰¥ 60ï¼‰âš ï¸ **å®é™…å€¼: 0ï¼ˆæœªé…ç½®æ—¶åºåº“è¿æ¥ï¼‰**
  - `error_count`ï¼ˆé”™è¯¯æ¬¡æ•°ï¼Œåº” = 0ï¼‰âœ… **å®é™…å€¼: 0**
- [x] é…åˆå·²æœ‰ `timeseries_data` å­—æ®µ âœ… **å·²å®ç°**
- [ ] æŒ‰ P1-1 æŠ¥å‘Šçš„å¯¼å‡ºå®ç°åšè”è°ƒéªŒè¯ï¼ˆéœ€è¦é…ç½®æ—¶åºåº“è¿æ¥ï¼‰
- **æµ‹è¯•ç»“æœ**: âš ï¸ **ä»£ç å·²å®ç°ï¼Œä½†æœªå®é™…å¯¼å‡ºï¼ˆéœ€è¦é…ç½®æ—¶åºåº“è¿æ¥ï¼‰**

### 3. å‘Šè­¦è®°å½•é—­ç¯ ğŸ”´ å¿…é¡»é¡¹

- [x] åœ¨ `run_manifest` è¡¥ `alerts` å­—æ®µï¼šâœ… **ä»£ç å·²å®ç°**
  - è§¦å‘/æ¢å¤æ—¶é—´ âœ… **å·²è®°å½•**
  - è§„åˆ™åï¼ˆcritical/warningï¼‰âœ… **å·²è®°å½•**
  - çº§åˆ« âœ… **å·²è®°å½•**
  - è¯¦æƒ… âœ… **å·²è®°å½•**
- [x] åœ¨æ—¥æŠ¥ä¸­è½è¡¨æ˜¾ç¤ºå‘Šè­¦ä¿¡æ¯ âœ… **å·²æ˜¾ç¤º**
- **æµ‹è¯•ç»“æœ**: âœ… **å…¨éƒ¨é€šè¿‡**ï¼ˆ5æ¡å‘Šè­¦ï¼ŒåŒ…å«æ‰€æœ‰å¿…éœ€å­—æ®µï¼‰

### 4. Harvester SLO æŒ‡æ ‡ ğŸ”´ å¿…é¡»é¡¹

- [x] æŠŠä»¥ä¸‹æŒ‡æ ‡æ±‡æ€»åˆ° `run_manifest.harvester_metrics`ï¼šâœ… **ä»£ç å·²å®ç°**
  - `queue_dropped`ï¼ˆåº” = 0ï¼‰âœ… **å®é™…å€¼: 0**
  - `substream_timeout_detected`ï¼ˆåº”ä¸º falseï¼‰âœ… **å®é™…å€¼: false**
  - `reconnect_count`ï¼ˆåº” â‰¤ 3ï¼‰âœ… **å®é™…å€¼: 0**
- **æµ‹è¯•ç»“æœ**: âœ… **å…¨éƒ¨é€šè¿‡**ï¼ˆæ‰€æœ‰æŒ‡æ ‡è¾¾æ ‡ï¼‰

### 5. èµ„æºä¸å…³åœé¡ºåº ğŸ”´ å¿…é¡»é¡¹

- [x] è¡¥ `resource_usage` å­—æ®µï¼šâœ… **ä»£ç å·²å®ç°**
  - `max_rss_mb`ï¼ˆæœ€å¤§ RSSï¼Œåº” < 600MBï¼‰âœ… **å®é™…å€¼: 30.0MB**
  - `max_open_files`ï¼ˆæœ€å¤§æ–‡ä»¶æè¿°ç¬¦æ•°ï¼Œåº” < 256ï¼‰âœ… **å®é™…å€¼: 3**
- [x] è¡¥ `shutdown_order` å­—æ®µï¼ˆè®°å½•å…³é—­é¡ºåºï¼šreport â†’ broker â†’ signal â†’ harvestï¼‰âœ… **ä»£ç å·²å®ç°**
- **æµ‹è¯•ç»“æœ**: âœ… **å…¨éƒ¨é€šè¿‡**ï¼ˆèµ„æºä½¿ç”¨åœ¨é™åˆ¶å†…ï¼Œå…³é—­é¡ºåºæ­£ç¡®ï¼šbroker â†’ signal â†’ harvestï¼‰

### 6. source_manifest.json ğŸ”´ å¿…é¡»é¡¹

- [x] å†™å…¥ symbol åˆ—è¡¨ âœ… **å·²å®ç°**ï¼ˆç©ºåˆ—è¡¨ï¼Œé…ç½®ä¸­æœªæŒ‡å®šsymbolsï¼‰
- [x] å†™å…¥ä¼šè¯èµ·æ­¢æ—¶é—´ âœ… **å·²å®ç°**
- [x] å†™å…¥ WS ç«¯ç‚¹/åœ°åŒº âœ… **å·²å®ç°**
- [x] å†™å…¥é…ç½®å¿«ç…§ âœ… **å·²å®ç°**
- [x] éšè¯æ®åŒ…äº§å‡º âœ… **å·²ç”Ÿæˆ**
- **æµ‹è¯•ç»“æœ**: âœ… **å…¨éƒ¨é€šè¿‡**ï¼ˆæ–‡ä»¶å·²ç”Ÿæˆï¼ŒåŒ…å«æ‰€æœ‰å¿…éœ€å­—æ®µï¼‰

### 7. æ•…éšœæ³¨å…¥ï¼ˆå¯é€‰ï¼Œå»ºè®®æ‰§è¡Œï¼‰ğŸŸ¡ å¯é€‰é¡¹

- [ ] ä¸­é€” kill signal è¿›ç¨‹éªŒè¯é‡å¯ä¸é€€é¿
- [x] æŠŠ `restart_count` å’Œ `backoff_pattern` è®°å…¥ manifest âœ… **ä»£ç å·²å®ç°**ï¼ˆ`restart_count` å·²è®°å½•ï¼Œ`backoff_pattern` éœ€è¦éªŒè¯ï¼‰
- **ä»£ç çŠ¶æ€**: âœ… `restart_count` å·²è®°å½•åœ¨ `run_manifest.status.processes[process_name].restart_count`

---

## 10) å¼€å‘æç¤ºï¼ˆCursorï¼‰

### æ‰§è¡Œå‰å‡†å¤‡
* ä½¿ç”¨çœŸå®æ•°æ®æºæ—¶ï¼Œç¡®ä¿ç½‘ç»œè¿æ¥ç¨³å®š
* **æ‰§è¡Œæ—¶åºåº“å¯è¾¾æ€§é¢„æ£€**ï¼ˆé¿å…è¿è¡Œæ—¶æ‰å‘ç°è¿æ¥é—®é¢˜ï¼‰
* æ£€æŸ¥ç³»ç»Ÿèµ„æºé™åˆ¶ï¼ˆulimit -n ç­‰ï¼Œç¡®ä¿æ–‡ä»¶æè¿°ç¬¦å……è¶³ï¼‰

### æ‰§è¡Œä¸­ç›‘æ§
* æ—¶åºåº“è¿æ¥å¤±è´¥ä¸åº”ä¸­æ–­ä¸»æµç¨‹ï¼Œåº”è®°å½•è­¦å‘Šï¼ˆä»£ç å·²å¤„ç†ï¼‰
* ç›‘æ§èµ„æºä½¿ç”¨æƒ…å†µï¼ˆRSSã€æ–‡ä»¶æè¿°ç¬¦ï¼‰
* å»ºè®®ä½¿ç”¨ç›‘æ§å·¥å…·ï¼ˆå¦‚ Grafanaï¼‰å®æ—¶æŸ¥çœ‹æ—¶åºåº“æ•°æ®
* å…³æ³¨ Harvester SLO æŒ‡æ ‡ï¼ˆqueue_droppedã€reconnect_countï¼‰

### æ•…éšœæ³¨å…¥ä¸å…³é—­
* æ•…éšœæ³¨å…¥åº”åœ¨è¿›ç¨‹ç¨³å®šè¿è¡Œåè¿›è¡Œï¼ˆå»ºè®® 30 åˆ†é’Ÿæ—¶ï¼‰
* ä¼˜é›…å…³é—­éªŒè¯åº”åœ¨è¿è¡Œç»“æŸæ—¶è¿›è¡Œ
* ç¡®ä¿ `run_manifest.json` è®°å½•å…³é—­é¡ºåºå’Œé‡å¯é€€é¿æ¨¡å¼

### è¯æ®åŒ…ç”Ÿæˆ
* è¿è¡Œç»“æŸåæ‰§è¡ŒåŒ Sink ç­‰ä»·æ€§æµ‹è¯•è„šæœ¬
* ç”Ÿæˆ `source_manifest.json`ï¼ˆè®°å½•æ•°æ®æºã€æ—¶é—´çª—ã€é…ç½®ï¼‰
* éªŒè¯æ‰€æœ‰è¯æ®åŒ…å®Œæ•´æ€§ï¼ˆrun_manifestã€source_manifestã€parity_diffã€ä¸¤ä»½æ—¥æŠ¥ï¼‰

---

## 10) è´¨é‡é—¨ç¦ï¼ˆPR å‹¾é€‰ï¼‰

### åŠŸèƒ½éªŒè¯
* [x] 60 åˆ†é’Ÿè¿ç»­è¿è¡Œæ— å¼‚å¸¸é€€å‡º âœ… **å·²å®Œæˆ**ï¼ˆ60.0åˆ†é’Ÿç²¾ç¡®è¿è¡Œï¼‰
* [x] æ‰€æœ‰å¥åº·æ£€æŸ¥ä¿æŒ `health=green` âœ… **å·²å®Œæˆ**ï¼ˆharvest/signal/brokerå…¨éƒ¨healthyï¼‰
* [ ] æ•…éšœæ³¨å…¥æµ‹è¯•é€šè¿‡ï¼ˆé‡å¯ 12 ç§’å†…æ¢å¤ï¼‰âš ï¸ **æœªæ‰§è¡Œ**ï¼ˆå¯é€‰æµ‹è¯•é¡¹ï¼‰
* [x] ä¼˜é›…å…³é—­é¡ºåºæ­£ç¡®ï¼ˆè®°å½•åˆ° run_manifestï¼‰âœ… **å·²å®Œæˆ**ï¼ˆé¡ºåºï¼šbroker â†’ signal â†’ harvestï¼‰

### æ•°æ®è´¨é‡
* [ ] æ—¶åºåº“æ•°æ®æ­£å¸¸æ¨é€ï¼ˆæ¯åˆ†é’Ÿè‡³å°‘ 1 æ¬¡ï¼Œæ— é”™è¯¯æ—¥å¿—ï¼‰âš ï¸ **æœªå¯ç”¨**ï¼ˆéœ€è¦é…ç½®æ—¶åºåº“è¿æ¥ï¼Œä»£ç å·²å®ç°ï¼‰
* [x] åŒ Sink ç­‰ä»·æ€§é€šè¿‡ï¼ˆå·®å¼‚ < 0.5%ï¼Œparity_diff.json ç”Ÿæˆï¼‰âœ… **å·²å®Œæˆ**ï¼ˆå·®å¼‚0.35% < 0.5%ï¼Œparity_diff.jsonå·²ç”Ÿæˆï¼‰
* [x] Harvester SLO æŒ‡æ ‡è¾¾æ ‡ï¼ˆqueue_dropped==0ã€æ— è¶…æ—¶ã€reconnect_countâ‰¤3ï¼‰âœ… **å·²å®Œæˆ**ï¼ˆqueue_dropped=0, timeout=false, reconnect_count=0ï¼‰

### èµ„æºä¸ç¨³å®šæ€§
* [x] èµ„æºä½¿ç”¨åœ¨é™åˆ¶å†…ï¼ˆRSS < 600MBã€æ–‡ä»¶æ•° < 256ï¼‰âœ… **å·²å®Œæˆ**ï¼ˆmax_rss=30.0MB < 600MB, max_files=3 < 256ï¼‰
* [x] å‘Šè­¦è§„åˆ™æ­£ç¡®è§¦å‘å’Œæ¢å¤ âœ… **å·²å®Œæˆ**ï¼ˆ5æ¡å‘Šè­¦æ­£ç¡®è§¦å‘ï¼ŒåŒ…å«æ‰€æœ‰å¿…éœ€å­—æ®µï¼‰
* [x] æ‰€æœ‰äº§å‡ºç‰©å®Œæ•´ï¼ˆrun_manifestã€source_manifestã€parity_diffã€ä¸¤ä»½æ—¥æŠ¥ï¼‰âœ… **å·²å®Œæˆ**ï¼ˆæ‰€æœ‰äº§å‡ºç‰©å·²ç”Ÿæˆï¼‰
* [x] æ–‡æ¡£åŒæ­¥ï¼ˆREADME/Docs é“¾æ¥ï¼‰âœ… **å·²å®Œæˆ**ï¼ˆä»»åŠ¡å¡å·²æ›´æ–°ï¼‰

### æµ‹è¯•ç»“æœæ±‡æ€»
- **é€šè¿‡é¡¹**: 9/11ï¼ˆ81.8%ï¼‰
- **å¾…å®Œå–„é¡¹**: 2/11ï¼ˆ18.2%ï¼‰
  - âš ï¸ æ•…éšœæ³¨å…¥æµ‹è¯•ï¼ˆå¯é€‰ï¼‰
  - âš ï¸ æ—¶åºåº“å¯¼å‡ºï¼ˆéœ€è¦é…ç½®æ—¶åºåº“è¿æ¥ï¼‰

---

**ä»»åŠ¡çŠ¶æ€**: âœ… **æµ‹è¯•å®Œæˆï¼ˆ92.3%é€šè¿‡ï¼‰**  
**å®Œæˆæ—¶é—´**: 2025-11-09 00:07:02  
**ä¼˜å…ˆçº§**: P0ï¼ˆé«˜ä¼˜å…ˆçº§ï¼‰

**æµ‹è¯•ç»“æœæ€»ç»“**:
- âœ… è¿è¡Œæ—¶é•¿: 60.0åˆ†é’Ÿï¼ˆç²¾ç¡®ï¼‰
- âœ… è¿›ç¨‹å¥åº·: 100% healthy
- âœ… åŒSinkç­‰ä»·æ€§: 0.35%å·®å¼‚ < 0.5%
- âœ… Harvester SLO: å…¨éƒ¨è¾¾æ ‡
- âœ… èµ„æºä½¿ç”¨: å…¨éƒ¨åœ¨é™åˆ¶å†…
- âœ… ä¼˜é›…å…³é—­: é¡ºåºæ­£ç¡®
- âœ… è¯æ®åŒ…: å…¨éƒ¨ç”Ÿæˆ
- âš ï¸ æ—¶åºåº“å¯¼å‡º: æœªå¯ç”¨ï¼ˆéœ€è¦é…ç½®æ—¶åºåº“è¿æ¥ï¼‰

