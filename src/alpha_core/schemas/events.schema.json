{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Events Schema",
  "description": "事件数据统一Row Schema",
  "type": "object",
  "required": ["ts_ms", "recv_ts_ms", "symbol", "row_id", "event_type"],
  "properties": {
    "ts_ms": {
      "type": "integer",
      "description": "事件时间戳（毫秒）"
    },
    "recv_ts_ms": {
      "type": "integer",
      "description": "接收时间戳（毫秒）"
    },
    "symbol": {
      "type": "string",
      "description": "交易对符号"
    },
    "row_id": {
      "type": "string",
      "description": "行唯一标识符"
    },
    "event_type": {
      "type": "string",
      "description": "事件类型",
      "enum": ["divergence", "timeout", "reconnect", "error", "other"]
    },
    "event_data": {
      "type": "object",
      "description": "事件数据（JSON对象）"
    },
    "date": {
      "type": "string",
      "description": "日期分区（YYYY-MM-DD）"
    },
    "hour": {
      "type": "string",
      "description": "小时分区（HH）"
    },
    "source_tier": {
      "type": "string",
      "description": "数据源层级",
      "enum": ["raw", "preview"]
    },
    "schema_version": {
      "type": "string",
      "description": "Schema版本",
      "enum": ["preagg_meta/v1"]
    }
  },
  "schema_version": "preagg_meta/v1"
}

